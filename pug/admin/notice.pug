html(style='width: 100%;')
  head
    title
    meta(name='description' content='')
    meta(name='keywords' content='매니스탈링스')
    meta(property="og:type" content="website")
    meta(property="og:site_name" content="MST")
    meta(property="og:title" content="차가운 기술로 따뜻한 세상을 만드는 🙂🙂 | AI 비전솔루션 매니스탈링스 Many Stallings Company")
    meta(property="og:description" content="AI Vision Solution")
    meta(property="og:image" content="http://plusuniv.com/img/og_img.png")
    meta(property='og:image:alt', content='Many Stallings Company Logo')
    meta(property="og:url" content="http://plusuniv.com")

    script(type="text/javascript" src="/js/vue.js")
    script(type="text/javascript" src="/js/grunt-build.js")
    script(type="text/javascript" src="/js/axios.js")
    script(type="text/javascript" src="/js/http.js")
    script(type="text/javascript" src="/js/components.js")

    link(rel='stylesheet' href='/css/buefy.css')
    link(rel="stylesheet" href='/css/admin.css')

    //link(href='https://vjs.zencdn.net/7.19.2/video-js.css', rel='stylesheet')

    link(rel='canonical' href='http://plusuniv.com')
    meta(name="viewport" content="width=device-width, initial-scale=1.0")

    link(rel='apple-touch-icon' href='/apple-touch-icon.png')
    //link(rel="icon" href="https://plusuniv.com/favicon.ico" type="image/x-icon")
    //link(rel='icon', href='https://plusuniv.com/favicon.svg' type="image/svg+xml")
  body
    #app(@click.self="deselect")
      main
        tnb-admin
        lnb(menu-name="어드민/게시판/리스트", :item-focused="itemFocused")
        .main-inner
          .data-control
            button.is-left(@click="remove" :disabled="!selectedRow") 삭제
            form(method="patch" action="/%EC%96%B4%EB%93%9C%EB%AF%BC/%EA%B2%8C%EC%8B%9C%ED%8C%90%EC%93%B0%EA%B8%B0")
              input(type="hidden" name="category" :value="tableName")
              button.is-left(type="submit") 글쓰기
            form(method="patch" action="/%EC%96%B4%EB%93%9C%EB%AF%BC/%EC%9D%B4%EB%AF%B8%EC%A7%80%EA%B2%8C%EC%8B%9C%ED%8C%90%EC%93%B0%EA%B8%B0")
              input(type="hidden" name="category" :value="tableName")
              button.is-left(type="submit") 이미지가 포함된 글쓰기
          .notice-items
            common-table(:_this="this" :data="select" :columns="columns" :tableName="tableName")
    include common/tnb-admin.pug
    include common/lnb.pug
 
  script(type='text/javascript').
    let tableName = "#{tableName}"
    let itemFocused = {
      '회사 뉴스': true
    }
    var v = new Vue({
      el: '#app',
      components: {
      },
      data: {
        itemFocused: itemFocused,
        select: [],
        autoFindColumn: false,
        columns: [
          {field: '일자', label: '일자', visible: true},
          {field: '국문제목', label: '국문제목', visible: true},
          {field: 'URL', label: 'URL', visible: false}
        ],
        tableName: "NOTICE1",
        selectedRow: null
      },
      methods: {
        remove: function () {
          http({uri:"게시판삭제", method:"delete", param: { tableName: tableName, datetime: this.selectedRow['일시'], NO: this.selectedRow['NO'] }, cb: (res) => {
            if(res.code === 0)
              alert("삭제되었습니다.")
            else
              alert("삭제에 살패하였습니다.", res.code)
          }})
        },
        deselect: function () {
          this.selectedRow = null
        }
      },
      computed: {
      },
      created()
      {
      },
      mounted()
      {
        http({uri:"게시판읽기", method:"patch", param: { tableName: tableName, row: {}, option: {rowId: '목록전체'} }, cb: (res) => {
          if(res.code === 0)
          {
            if(!Array.isArray(res.data))
              this.select = []
            else
              this.select = res.data
            if(this.select.length > 0)
            {
              if(this.autoFindColumn)
              {
                this.columns = []
                Object.keys(this.select[0]).forEach(columnName => {
                  this.columns.push({field: columnName, label: columnName})
                })

              }
            }
          }
        } })
        
      },
      beforeDestroy()
      {
      }

    })