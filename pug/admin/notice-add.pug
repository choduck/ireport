html(style='width: 100%;')
  head
    title
    meta(name='description' content='')
    meta(name='keywords' content='매니스탈링스')
    meta(property="og:type" content="website")
    meta(property="og:site_name" content="MST")
    meta(property="og:title" content="차가운 기술로 따뜻한 세상을 만드는 🙂🙂 | AI 비전솔루션 매니스탈링스 Many Stallings Company")
    meta(property="og:description" content="AI Vision Solution")
    meta(property="og:image" content="http://plusuniv.com/img/og_img.png")
    meta(property='og:image:alt', content='Many Stallings Company Logo')
    meta(property="og:url" content="http://plusuniv.com")

    script(type="text/javascript" src="/js/vue.js")
    script(type="text/javascript" src="/js/grunt-build.js")
    script(type="text/javascript" src="/js/axios.js")
    script(type="text/javascript" src="/js/http.js")

    link(rel='stylesheet' href='/css/buefy.css')
    link(rel="stylesheet" href='/css/admin.css')

    //link(href='https://vjs.zencdn.net/7.19.2/video-js.css', rel='stylesheet')

    link(rel='canonical' href='http://plusuniv.com')
    meta(name="viewport" content="width=device-width, initial-scale=1.0")

    link(rel='apple-touch-icon' href='/apple-touch-icon.png')
    //link(rel="icon" href="https://plusuniv.com/favicon.ico" type="image/x-icon")
    //link(rel='icon', href='https://plusuniv.com/favicon.svg' type="image/svg+xml")
  body
    #app
      header
        tnb-admin(text="어드민/게시판 글쓰기")
      aside
        headers(menu-name="게시판 설정")
      main.is-vertical
        .data-control
          button.is-left(@click="goBack") 이전 페이지
          button.is-right(@click="write") 등록
        .notice
          .h-stack
            .label 카테고리
            b-input.flex-1(type="text" v-model="category" disabled)
          
          // 구축사례인 경우 추가 필드 표시
          template(v-if="category === '구축사례'")
            .h-stack
              .label 고객사
              b-input.flex-1(type="text" v-model="customer" placeholder="고객사명을 입력하세요")
            .h-stack
              .label 사업명
              b-input.flex-1(type="text" v-model="projectName" placeholder="사업명을 입력하세요")
            .h-stack
              .label 사업기간
              b-input.flex-1(type="text" v-model="projectPeriod" placeholder="예: 25.01 - 25.04")
          
          // 일반 게시글인 경우 기존 필드 표시
          template(v-else)
            .h-stack
              .label 국문제목
              b-input.flex-1(type="text" v-model="title" placeholder="국문제목")
            .h-stack
              .label 국문내용
              b-input.flex-1(type="textarea" v-model="content" placeholder="국문내용")
            .h-stack
              .label 영문제목
              b-input.flex-1(type="text" v-model="titleEN" placeholder="영문제목")
            .h-stack
              .label 영문내용
              b-input.flex-1(type="textarea" v-model="contentEN" placeholder="영문내용")
    include common/tnb-admin.pug
    include common/lnb.pug

 
  script(type="text/javascript" src="/js/components.js")
  script(type='text/javascript').
    let api_key = "#{api_key}"
    let category = "#{category}"
    var v = new Vue({
      el: '#app',
      components: {
      },
      data: {
        category: category,
        title: '',
        content: '',
        titleEN: '',
        contentEN: '',
        customer: '',
        projectName: '',
        projectPeriod: '',
      },
      methods: {
        write: function () {
          let row = {
            '카테고리': this.category
          }
          
          // 구축사례인 경우 해당 필드만 포함
          if (this.category === '구축사례') {
            if (!this.customer || !this.projectName || !this.projectPeriod) {
              alert("고객사, 사업명, 사업기간을 모두 입력해주세요.")
              return
            }
            row['고객사'] = this.customer
            row['사업명'] = this.projectName
            row['사업기간'] = this.projectPeriod
          } else {
            // 일반 게시글인 경우 기존 필드 포함
            row['국문제목'] = this.title
            row['국문내용'] = this.content
            row['영문제목'] = this.titleEN
            row['영문내용'] = this.contentEN
          }
          
          http({uri:"게시판쓰기", method:"post", param: { api_key, tableName: 'TB_NOTICE1', row: row }, cb: (res) => {
            if(res.code === 0)
            {
              alert("등록되었습니다.")
              // 등록 후 게시판으로 이동
              if (this.category === '구축사례') {
                window.location.href = '/construction-cases'
              } else {
                window.location.href = '/%EC%96%B4%EB%93%9C%EB%AF%BC/%EA%B2%8C%EC%8B%9C%ED%8C%90?n=n1'
              }
            }
            else
              alert("등록에 실패하였습니다.")
          } })

        },
        goBack: function () {
          history.go(-1)
        }
      },
      computed: {
      },
      created()
      {
      },
      mounted()
      {
      },
      beforeDestroy()
      {
      }

    })